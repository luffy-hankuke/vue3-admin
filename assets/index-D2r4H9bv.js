import{f}from"./index-CCwlABZW.js";import{A as $,_ as D}from"./index-DWJF4vuV.js";import{bs as F,bt as j,Q as r,U as x,ac as p}from"./antdv-CAXihDg_.js";import{d as S,c as m,W as k,X as V,au as A,av as G,u as e,r as R,I as T,o as E,j as H,a5 as M,k as a,Y as t,G as s,ak as l,F as O,ae as Q,a6 as _}from"./vue-Dbi1xauY.js";import"./is-C0dFuREE.js";const b=S({__name:"index",props:{...F(),strokeColor:{type:[String,Object,Function]}},setup(g){const n=g,I=m(()=>typeof n.strokeColor=="function"?{...n,strokeColor:n.strokeColor(n.percent)}:{...n,strokeColor:n.strokeColor});return(d,c)=>(k(),V(e(j),A(G(I.value)),null,16))}}),W={class:"sys-server-stat-container"},X={class:"disk-info"},Y={class:"disk-info--item"},q={class:"disk-info"},J={class:"disk-info--item"},K=S({name:"SystemMonitorServe",__name:"index",setup(g){let n;const I=R({runtime:{os:"",arch:"",nodeVersion:"",npmVersion:""},disk:{size:0,used:0,available:0},memory:{total:0,available:0},cpu:{manufacturer:"",brand:"",physicalCores:0,model:"",speed:0,rawCurrentLoad:0,rawCurrentLoadIdle:0,coresLoad:[]}}),{runtime:d,disk:c,memory:u,cpu:i}=T(I),h=m(()=>({size:f(c.value.size),used:f(c.value.used),available:f(c.value.available)})),y=m(()=>({total:f(u.value.total),free:f(u.value.available),used:f(u.value.total-u.value.available)})),U=m(()=>c.value.size<=0?0:Math.floor(c.value.used/c.value.size*100)),B=m(()=>u.value.total<=0?0:Math.floor((u.value.total-u.value.available)/u.value.total*100)),N=m(()=>`${i.value.manufacturer} ${i.value.brand} @ ${i.value.speed}GHz`),z=async()=>{const o=await $.systemServe.serveStat();d.value=o.runtime,c.value=o.disk,u.value=o.memory,i.value=o.cpu};z();const v=o=>o<30?"#5cb87a":o<70?"#e6a23c":"#f53f3f",L=(o,C)=>C<=0?0:Math.floor(o/C*100);return E(()=>{n=setInterval(z,1e4)}),H(()=>{clearInterval(n)}),(o,C)=>(k(),M("div",W,[a(e(p),{class:"stat-card",title:"运行环境"},{default:t(()=>[a(e(r),{column:1,"label-style":{width:"50%"}},{default:t(()=>[a(e(r).Item,{label:"操作系统"},{default:t(()=>[s(l(e(d).os),1)]),_:1}),a(e(r).Item,{label:"系统架构"},{default:t(()=>[s(l(e(d).arch),1)]),_:1}),a(e(r).Item,{label:"Node版本"},{default:t(()=>[a(e(x),{color:"processing",size:"small"},{default:t(()=>[s("v"+l(e(d).nodeVersion),1)]),_:1})]),_:1}),a(e(r).Item,{label:"NPM版本"},{default:t(()=>[a(e(x),{color:"processing",size:"small"},{default:t(()=>[s("v"+l(e(d).npmVersion),1)]),_:1})]),_:1})]),_:1})]),_:1}),a(e(p),{class:"stat-card",title:"CPU"},{default:t(()=>[a(e(r),{column:1,"label-style":{width:"50%"},"content-style":{width:"50%"}},{default:t(()=>[a(e(r).Item,{label:"详细"},{default:t(()=>[s(l(N.value),1)]),_:1}),a(e(r).Item,{label:"负载"},{default:t(()=>[a(b,{percent:L(e(i).rawCurrentLoad,e(i).rawCurrentLoadIdle+e(i).rawCurrentLoad),"stroke-color":v},null,8,["percent"])]),_:1}),(k(!0),M(O,null,Q(e(i).coresLoad,(w,P)=>(k(),V(e(r).Item,{key:P,label:`核心${P+1} 负载`},{default:t(()=>[a(b,{percent:L(w.rawLoad,w.rawLoad+w.rawLoadIdle),"stroke-color":v},null,8,["percent"])]),_:2},1032,["label"]))),128))]),_:1})]),_:1}),a(e(p),{class:"stat-card",title:"磁盘"},{default:t(()=>[_("div",X,[a(e(r),{class:"disk-info--item",column:1},{default:t(()=>[a(e(r).Item,{label:"总空间"},{default:t(()=>[s(l(h.value.size),1)]),_:1}),a(e(r).Item,{label:"已用空间"},{default:t(()=>[s(l(h.value.used),1)]),_:1}),a(e(r).Item,{label:"可用空间"},{default:t(()=>[s(l(h.value.available),1)]),_:1})]),_:1}),_("div",Y,[a(b,{type:"dashboard",percent:U.value,width:100,"stroke-color":v},null,8,["percent"])])])]),_:1}),a(e(p),{class:"stat-card",title:"内存"},{default:t(()=>[_("div",q,[a(e(r),{class:"disk-info--item",column:1},{default:t(()=>[a(e(r).Item,{label:"总内存"},{default:t(()=>[s(l(y.value.total),1)]),_:1}),a(e(r).Item,{label:"已用内存"},{default:t(()=>[s(l(y.value.used),1)]),_:1}),a(e(r).Item,{label:"可用内存"},{default:t(()=>[s(l(y.value.free),1)]),_:1})]),_:1}),_("div",J,[a(b,{type:"dashboard",percent:B.value,width:100,"stroke-color":v},null,8,["percent"])])])]),_:1})]))}}),se=D(K,[["__scopeId","data-v-6f1f0887"]]);export{se as default};
