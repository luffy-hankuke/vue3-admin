import{k as o,a as C,d as v,f as I,F as T,g as M,e as g,aj as w,W as j,X as S,Y as i,G as x,u as m,ac as F}from"./vue-Dbi1xauY.js";import{z as O,h as q}from"./index-DWJF4vuV.js";import{U as E,aq as f,ac as N}from"./antdv-CAXihDg_.js";import{u as R,c as V}from"./dynamic-table-DhiAq_hs.js";import"./ApiSelect.vue_vue_type_script_setup_true_lang-IWTYr-Fy.js";import{a as A}from"./hero-B2TQ8FlD.js";import{c as D,d as h}from"./createContextMenu-C8FurjUw.js";import{a as P,j as L}from"./index-CRg_9rTs.js";import"./index.vue_vue_type_style_index_0_lang-Dww9ZzaR.js";import{u as X}from"./useFormModal-DGpV1vZs.js";import"./schema-form.vue_vue_type_script_setup_true_lang-C0d9vjpU.js";import"./is-C0dFuREE.js";import"./index-CCwlABZW.js";import"./dateUtil-NBcmMhwL.js";import"./useModal-BsEyE0vB.js";function z(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!C(e)}const B=v({props:{record:Object},setup(e){const l=I(!1);return()=>{var a;return o(T,null,[o(f,{src:(a=e.record)==null?void 0:a.avatar,preview:{visible:!1},onClick:()=>l.value=!0},null),o("div",{hidden:!0},[o(f.PreviewGroup,{preview:{visible:l.value,onVisibleChange:r=>l.value=r}},{default:()=>{var r;return[(r=e.record)==null?void 0:r.posters.map(s=>o(f,{src:s,key:s},null))]}})])])}}}),y=[{title:"头像",width:100,hideInSearch:!0,dataIndex:"avatar",customRender:({record:e})=>o(B,{record:e,key:e.avatar},null)},{title:"英雄名称",dataIndex:"title"},{title:"英雄称号",dataIndex:"name"},{title:"定位",dataIndex:"roles",customRender:({record:e})=>{var l;return o("div",null,[(l=e.roles)==null?void 0:l.map(a=>o(E,{color:"blue",key:a},z(a)?a:{default:()=>[a]}))])}},{title:"操作",width:120,dataIndex:"ACTION",actions:({record:e})=>[{label:"查看详情",onClick:()=>O.push({name:"demos-table-lol-info",params:{id:e.heroId}})}]}];function G(e=!0){return M()&&e&&g(()=>{h()}),[D,h]}const K=e=>[{field:"filename",component:"Input",label:e("component.excel.fileName"),rules:[{required:!0}]},{field:"bookType",component:"Select",label:e("component.excel.fileType"),defaultValue:"xlsx",rules:[{required:!0}],componentProps:{options:[{label:"xlsx",value:"xlsx",key:"xlsx"},{label:"html",value:"html",key:"html"},{label:"csv",value:"csv",key:"csv"},{label:"txt",value:"txt",key:"txt"}]}}],U=()=>{const{t:e}=q(),[l]=X();return{openModal:({onOk:r})=>{l({modalProps:{title:e("component.excel.exportModalTitle"),onFinish:async s=>{const{filename:p,bookType:u}=s;r({filename:`${p.split(".").shift()}.${u}`,bookType:u})}},formProps:{labelWidth:100,schemas:K(e)}})}}},ce=v({name:"DemosTablesLolTable",__name:"index",setup(e){const[l,a]=R(),r=w(),[s]=G(),p=U(),u=()=>{const n=y.filter(t=>!V.includes(t.dataIndex)),c=n.map(t=>t.dataIndex);P({data:a.tableData.map(t=>c.reduce((b,d)=>(b[d]=Array.isArray(t[d])?t[d].toString():t[d],b),{})).map(t=>Object.values(t)),header:n.map(t=>t.title),filename:"二维数组方式导出excel.xlsx"})},_=()=>{p.openModal({onOk:({filename:n,bookType:c})=>{L({data:a.tableData,filename:n,write2excelOpts:{bookType:c}})}})},k=n=>({onContextmenu:c=>{s({event:c,items:[{label:"查看",handler:()=>{r.push({name:"demos-table-lol-info",params:{id:n.heroId}})}},{label:"编辑",handler:()=>{}}]})}});return(n,c)=>{const t=F("a-button");return j(),S(m(N),{title:"英雄列表mock数据",style:{"margin-top":"20px"}},{default:i(()=>[o(m(l),{size:"small",bordered:"","data-request":m(A),columns:m(y),"row-key":"heroid","export-file-name":"英雄联盟","custom-row":k},{"export-button":i(()=>[o(t,{type:"primary"},{default:i(()=>[x("表格自带导出")]),_:1})]),toolbar:i(()=>[o(t,{type:"primary",onClick:u},{default:i(()=>[x(" 数组格式导出 ")]),_:1}),o(t,{type:"primary",onClick:_},{default:i(()=>[x(" 自定义导出格式 ")]),_:1})]),_:1},8,["data-request","columns"])]),_:1})}}});export{ce as default};
